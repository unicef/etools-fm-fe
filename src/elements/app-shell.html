<!--import [polymer/polymer-element, shadycss/apply-shim, etools-behaviors/etools-mixin-factory, app-route/app-location, app-route,
            app-layout, paper-icon-button, paper-material, iron-selector, iron-pages, iron-collapse, iron-icons,
            iron-icons/social-icons, iron-icons/av-icons, etools-loading/etools-loading-mixin]-->

<!--import [main-header, sidebar-menu, permission-controller, etools-app-config, multi-notification-list,
            side-bar-item, countries-dropdown, shared-styles, page-layout-styles, app-theme, redux-mixin,
            query-params-mixin]-->

<dom-module id="app-shell">
    <template>
        <!-- inject styles './app-shell.scss'-->
        <style include="page-layout-styles shared-styles">
            app-header {
                background-color: var(--header-bg-color);
            }
        </style>


        <app-location route="{{route}}"></app-location>

        <app-route
                route="{{route}}"
                pattern="[[basePath]]:page"
                data="{{routeData}}"
                tail="{{subRoute}}">
        </app-route>

        <etools-loading id="global-loading" absolute></etools-loading>

        <div id="layout">
            <!-- Drawer content -->
            <app-drawer slot="drawer" id="drawer" transition-duration="350" disable-swipe>
                <sidebar-menu route="{{route}}" page="[[page]]" opened="[[isDrawerOpened]]"></sidebar-menu>
            </app-drawer>

            <!-- Main content -->

            <app-header id="header" fixed shadow>
                <main-header></main-header>
            </app-header>

            <iron-pages
                    id="pages"
                    selected="[[page]]"
                    attr-for-selected="name"
                    fallback-selection="not-found"
                    role="main">
                <settings-page name="settings" id="settings" route="{{subRoute}}"></settings-page>
                <not-found-page-view name="not-found" id="not-found"></not-found-page-view>
            </iron-pages>

        </div>
        <multi-notification-list></multi-notification-list>
    </template>

    <!-- inject scripts './app-shell.ts'-->
</dom-module>
